generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model dungeon_items {
  dungeon_id Int
  item_id    Int
  dungeons   dungeons @relation(fields: [dungeon_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  items      items    @relation(fields: [item_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([dungeon_id, item_id])
}

model dungeons {
  id            Int             @id @default(autoincrement())
  name          String          @db.VarChar(255)
  game_id       Int
  boss          String?         @db.VarChar(255)
  description   String?
  dungeon_items dungeon_items[]
  games         games           @relation(fields: [game_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([name, game_id], map: "unique_dungeon_per_game")
}

model games {
  id           Int        @id @default(autoincrement())
  title        String     @unique(map: "unique_title_per_game") @db.VarChar(255)
  max_dungeons Int
  dungeons     dungeons[]
}

model items {
  id            Int             @id @default(autoincrement())
  name          String          @unique(map: "unique_item_name") @db.VarChar(255)
  usability     String?
  dungeon_items dungeon_items[]
}
